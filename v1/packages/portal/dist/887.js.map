{"version":3,"file":"887.js","mappings":"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","sources":["webpack://@smc/portal/./src/utils/getOrLoadRemote.js","webpack://@smc/portal/./src/utils/loadModule.js","webpack://@smc/portal/./src/App.js","webpack://@smc/portal/./src/bootstrap.js"],"sourcesContent":["/**\r\n * The Right Way to Load Dynamic Remotes\r\n * @author ScriptedAlchemy <zackary.l.jackson@gmail.com>\r\n * @see {@link https://gist.github.com/ScriptedAlchemy/3a24008ef60adc47fad1af7d3299a063}\r\n *\r\n * @param {string} remote - the remote global name\r\n * @param {object | string} shareScope - the shareScope Object OR scope key\r\n * @param {string} remoteFallbackUrl - fallback url for remote module\r\n * @returns {Promise<object>} - Federated Module Container\r\n */\r\nexport const getOrLoadRemote = (remote, shareScope, remoteFallbackUrl = undefined) =>\r\n  new Promise((resolve, reject) => {\r\n    // check if remote exists on window\r\n    if (!window[remote]) {\r\n      // search dom to see if remote tag exists, but might still be loading (async)\r\n      const existingRemote = document.querySelector(`[data-webpack=\"${remote}\"]`);\r\n      // when remote is loaded..\r\n      const onload = originOnload => async () => {\r\n        // check if it was initialized\r\n        if (!window[remote].__initialized) {\r\n          // if share scope doesnt exist (like in webpack 4) then expect shareScope to be a manual object\r\n          if (typeof __webpack_share_scopes__ === 'undefined') {\r\n            // use default share scope object passed in manually\r\n            await window[remote].init(shareScope.default);\r\n          } else {\r\n            // otherwise, init share scope as usual\r\n            await window[remote].init(__webpack_share_scopes__[shareScope]);\r\n          }\r\n          // mark remote as initialized\r\n          window[remote].__initialized = true;\r\n        }\r\n        // resolve promise so marking remote as loaded\r\n        resolve();\r\n        originOnload && originOnload();\r\n      };\r\n      if (existingRemote) {\r\n        // if existing remote but not loaded, hook into its onload and wait for it to be ready\r\n        existingRemote.onload = onload(existingRemote.onload);\r\n        existingRemote.onerror = reject;\r\n        // check if remote fallback exists as param passed to function\r\n        // TODO: should scan public config for a matching key if no override exists\r\n      } else if (remoteFallbackUrl) {\r\n        // inject remote if a fallback exists and call the same onload function\r\n        var d = document,\r\n          script = d.createElement('script');\r\n        script.type = 'text/javascript';\r\n        // mark as data-webpack so runtime can track it internally\r\n        script.setAttribute('data-webpack', `${remote}`);\r\n        script.async = true;\r\n        script.onerror = reject;\r\n        script.onload = onload(null);\r\n        script.src = remoteFallbackUrl;\r\n        d.getElementsByTagName('head')[0].appendChild(script);\r\n      } else {\r\n        // no remote and no fallback exist, reject\r\n        reject(`Cannot Find Remote ${remote} to inject`);\r\n      }\r\n    } else {\r\n      // remote already instantiated, resolve\r\n      resolve();\r\n    }\r\n  });\r\n","import { getOrLoadRemote } from './getOrLoadRemote';\r\n\r\nexport const loadModule = async (remote, sharedScope, module, url) => {\r\n  await getOrLoadRemote(remote, sharedScope, url);\r\n  const container = window[remote];\r\n  const factory = await container.get(module);\r\n  const Module = factory();\r\n  return Module;\r\n};\r\n","import React, {useState} from 'react';\r\nimport {loadModule} from './utils/loadModule';\r\nimport {resolveRenderer} from \"@smc/rendering\";\r\n\r\nfunction App() {\r\n  const [renderedContent, setRenderedContent] = useState();\r\n\r\n  async function renderChart() {\r\n    await loadModule('charting', 'default', './index', 'http://localhost:3002/remoteEntry.js');\r\n    const chart = resolveRenderer('Chart');\r\n    setRenderedContent(chart);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        fontFamily:\r\n          '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\r\n      }}\r\n    >\r\n      <h1>Dynamic System Host</h1>\r\n      <h2>App 1</h2>\r\n      <p>\r\n        The Dynamic System will take advantage Module Federation <strong>remotes</strong> and{' '}\r\n        <strong>exposes</strong>. It will not load any components or modules that have been loaded\r\n        already.\r\n      </p>\r\n      <button onClick={renderChart}>Render chart</button>\r\n      <div style={{marginTop: '2em'}}>\r\n        {renderedContent}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import App from './App';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"names":["getOrLoadRemote","remote","shareScope","remoteFallbackUrl","undefined","Promise","resolve","reject","window","existingRemote","document","querySelector","onload","originOnload","__initialized","__webpack_share_scopes__","init","default","onerror","d","script","createElement","type","setAttribute","async","src","getElementsByTagName","appendChild","loadModule","sharedScope","module","url","container","factory","get","Module","React","useState","resolveRenderer","App","renderedContent","setRenderedContent","renderChart","chart","fontFamily","marginTop","ReactDOM","render","getElementById"],"sourceRoot":""}